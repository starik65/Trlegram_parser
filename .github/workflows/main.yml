name: üöÄ Telegram Parser & n8n Sender (–°–µ—Å—Å–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª)

on:
  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤–æ—Ä–∫—Ñ–ª–æ—É –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å GitHub Actions
  workflow_dispatch:
    inputs:
      webhook_url:
        description: 'URL –≤–∞—à–µ–≥–æ n8n Webhook'
        required: true
        default: 'https://your.n8n.webhook.url'

jobs:
  run-parser:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Set up Python and Dependencies
        uses: actions/setup-python@v5
        with:
          python-version: '3.x' 
      - run: pip install telethon requests

      - name: Run Telegram Parser and Send to n8n
        # !!! –≠–¢–ê –ö–û–ú–ê–ù–î–ê –ó–ê–ü–£–°–ö–ê–ï–¢ –ù–û–í–´–ô –°–ö–†–ò–ü–¢ main_parser.py !!!
        run: python3 main_parser.py
        env:
          # –ü–µ—Ä–µ–¥–∞—á–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏ URL Webhook –≤ —Å–∫—Ä–∏–ø—Ç
          API_ID: ${{ secrets.API_ID }} 
          API_HASH: ${{ secrets.API_HASH }}
          N8N_WEBHOOK_URL: ${{ github.event.inputs.webhook_url }}
